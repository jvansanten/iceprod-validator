{
  "difplus":null,
  "tasks":[
    {
      "requirements":{
        "disk":8,
        "time":5,
        "memory":2
      },
      "name":"generate",
      "parameters":{},
      "depends":[],
      "batchsys":null,
      "trays":[
        {
          "name":"corsika",
          "parameters":{},
          "modules":[
            {
              "resources":[],
              "name":"",
              "env_clear":true,
              "args":{
                "eprimarymin":"$steering(CORSIKA::eprimarymin)",
                "corsikaVersion":"76900g",
                "CORSIKAseed":"$steering(CORSIKA::seed)",
                "seed":"$steering(seed)",
                "HistogramFilename":"histo_$steering(outfile).pkl",
                "CutoffType":"EnergyPerParticle",
                "UsePipe":null,
                "outputfile":"corsika_$steering(outfile).i3.zst",
                "eprimarymax":"$steering(CORSIKA::eprimarymax)",
                "OverSampling":0,
                "procnum":"$(job)",
                "compress":null,
                "pnorm":"5,2.25,1.1,1.2,1",
                "RepoURL":"http://prod-exe.icecube.wisc.edu/",
                "nproc":"$(jobs_submitted)",
                "gcdfile":"$(gcdfile)",
                "nshowers":"$steering(CORSIKA::showers)",
                "pgam":"2.65,2.6,2.6,2.6,2.6",
                "summaryfile":"summary_$steering(outfile).json",
                "EnableHistogram":null,
                "UseGSLRNG":null
              },
              "env_shell":"$steering(env_shell)",
              "classes":[],
              "src":"$steering(metaproj)/simprod-scripts/resources/scripts/corsika5comp.py",
              "parameters":{},
              "data":[
                {
                  "remote":"$steering(TARGET)/corsika_$steering(outfile).i3.zst",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"corsika_$steering(outfile).i3.zst",
                  "movement":"output"
                },
                {
                  "remote":"$steering(TARGET)/histo_$steering(outfile).pkl",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"histo_$steering(outfile).pkl",
                  "movement":"output"
                }
              ],
              "projects":[]
            }
          ],
          "classes":[],
          "resources":[],
          "iterations":1,
          "data":[],
          "projects":[]
        }
      ],
      "projects":[],
      "classes":[],
      "data":[],
      "resources":[]
    },
    {
      "requirements":{
        "gpu":1,
        "disk":15,
        "cpu":2,
        "memory":3.5
      },
      "name":"hits",
      "parameters":{},
      "depends":[
        "generate"
      ],
      "batchsys":null,
      "trays":[
        {
          "name":"propagate",
          "parameters":{},
          "modules":[
            {
              "resources":[],
              "name":"clsim",
              "env_clear":true,
              "args":{
                "holeiceparametrization":"$steering(IceSimPath)/ice-models/resources/models/angsens_flasher/as.9",
                "outputfile":"signalhits_$steering(outfile).i3.zst",
                "IceModel":"$steering(IceModel)",
                "IceModelLocation":"$steering(IceSimPath)/ice-models/resources/models/",
                "efficiency":"$steering(DOMefficiency)",
                "summaryfile":"summary_$steering(outfile).json",
                "seed":"$steering(seed)",
                "OverSampling":"$steering(oversampling)",
                "nproc":"$(jobs_submitted)",
                "inputfilelist":"corsika_$steering(outfile).i3.zst",
                "oversize":5,
                "gcdfile":"$(gcdfile)",
                "procnum":"$(job)",
                "no-RunMPHitFilter":null,
                "UseGPU":null,
                "UseGSLRNG":null
              },
              "env_shell":"$steering(env_shell)",
              "classes":[],
              "src":"$steering(metaproj)/simprod-scripts/resources/scripts/resampleclsim.py",
              "parameters":{},
              "data":[
                {
                  "remote":"$steering(TARGET)/corsika_$steering(outfile).i3.zst",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"corsika_$steering(outfile).i3.zst",
                  "movement":"input"
                },
                {
                  "remote":"$steering(TARGET)/signalhits_$steering(outfile).i3.zst",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"signalhits_$steering(outfile).i3.zst",
                  "movement":"output"
                }
              ],
              "projects":[]
            },
            {
              "resources":[],
              "name":"polyplopia",
              "env_clear":true,
              "args":{
                "holeiceparametrization":"$steering(IceSimPath)/ice-models/resources/models/angsens_flasher/as.9",
                "outputfile":"hits_$steering(outfile).i3.zst",
                "IceModel":"$steering(IceModel)",
                "efficiency":"$steering(DOMefficiency)",
                "nproc":"$(jobs_submitted)",
                "backgroundrate":5261.85,
                "IceModelLocation":"$steering(IceSimPath)/ice-models/resources/models/",
                "seed":"$steering(seed)",
                "oversize":5,
                "gcdfile":"$(gcdfile)",
                "inputfile":"signalhits_$steering(outfile).i3.zst",
                "procnum":"$(job)",
                "UseGSLRNG":null
              },
              "env_shell":"$steering(env_shell)",
              "classes":[],
              "src":"$steering(metaproj)/simprod-scripts/resources/scripts/polyplopia.py",
              "parameters":{},
              "data":[
                {
                  "remote":"$steering(TARGET)/hits_$steering(outfile).i3.zst",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"hits_$steering(outfile).i3.zst",
                  "movement":"output"
                }
              ],
              "projects":[]
            }
          ],
          "classes":[],
          "resources":[],
          "iterations":1,
          "data":[],
          "projects":[]
        }
      ],
      "projects":[],
      "classes":[],
      "data":[],
      "resources":[]
    },
    {
      "requirements":{
        "memory":3
      },
      "name":"detector",
      "parameters":{},
      "depends":[
        "hits"
      ],
      "batchsys":null,
      "trays":[
        {
          "name":"ic86",
          "parameters":{},
          "modules":[
            {
              "src":"$steering(metaproj)/simprod-scripts/resources/scripts/detector.py",
              "resources":[],
              "name":"",
              "env_clear":true,
              "args":{
                "outputfile":"$steering(outfile).i3.zst",
                "MCType":"$steering(mctype)",
                "SkipKeys":"SignalI3MCPEs,BackgroundI3MCPESeriesMap,I3MCPESeriesMap,I3MCPESeriesMapWithoutNoise",
                "MCPrescale":"$steering(MCPrescale)",
                "LowMem":null,
                "HistogramFilename":"histo.pkl",
                "RunID":"$steering(CORSIKA::run)",
                "nproc":"$(jobs_submitted)",
                "gcdfile":"$(gcdfile)",
                "inputfile":"hits_$steering(outfile).i3.zst",
                "seed":"$steering(seed)",
                "procnum":"$(job)",
                "UseGSLRNG":null
              },
              "env_shell":"$steering(env_shell)",
              "classes":[],
              "parameters":{},
              "data":[
                {
                  "remote":"$steering(TARGET)/hits_$steering(outfile).i3.zst",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"hits_$steering(outfile).i3.zst",
                  "movement":"input"
                },
                {
                  "remote":"$steering(TARGET)/$steering(outfile).i3.zst",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"$steering(outfile).i3.zst",
                  "movement":"output"
                },
                {
                  "remote":"$steering(TARGET)/histos/detector_$(job).pkl",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"histo.pkl",
                  "movement":"output"
                }
              ],
              "projects":[]
            }
          ],
          "classes":[],
          "resources":[],
          "iterations":1,
          "data":[],
          "projects":[]
        },
        {
          "name":"L1",
          "parameters":{},
          "modules":[
            {
              "src":"$steering(metaproj)/filterscripts/resources/scripts/SimulationFiltering.py",
              "resources":[],
              "name":"",
              "env_clear":true,
              "args":{
                "input":"$steering(outfile).i3.zst",
                "photonicsdir":"/cvmfs/icecube.opensciencegrid.org/data/photon-tables",
                "MinBiasPrescale":500,
                "gcd":"$(gcdfilel2)",
                "output":"$steering(FILTER::infile)"
              },
              "env_shell":"$steering(env_shell)",
              "classes":[],
              "running_class":"",
              "parameters":{},
              "data":[
                {
                  "remote":"$steering(TARGET)/$steering(FILTER::infile)",
                  "compression":false,
                  "transfer":"exists",
                  "type":"permanent",
                  "local":"$steering(FILTER::infile)",
                  "movement":"output"
                }
              ],
              "projects":[]
            }
          ],
          "classes":[],
          "resources":[],
          "iterations":1,
          "data":[],
          "projects":[]
        },
        {
          "name":"L2",
          "parameters":{},
          "modules":[
            {
              "src":"$steering(metaproj)/filterscripts/resources/scripts/offlineL2/process.py",
              "resources":[],
              "name":"",
              "env_clear":true,
              "args":{
                "input":"$steering(FILTER::infile)",
                "photonicsdir":"/cvmfs/icecube.opensciencegrid.org/data/photon-tables",
                "output":"$steering(FILTER::outfile)",
                "gcd":"$(gcdfilel2)",
                "simulation":null
              },
              "env_shell":"$steering(env_shell)",
              "classes":[],
              "running_class":"",
              "parameters":{},
              "data":[
                {
                  "type":"permanent",
                  "movement":"output",
                  "remote":"$steering(TARGET)/$steering(FILTER::outfile)",
                  "compression":false,
                  "local":"$steering(FILTER::outfile)"
                }
              ],
              "projects":[]
            }
          ],
          "classes":[],
          "resources":[],
          "iterations":1,
          "data":[],
          "projects":[]
        }
      ],
      "projects":[],
      "classes":[],
      "data":[],
      "resources":[]
    }
  ],
  "description":"TEST: control sample for dynamic stack",
  "parent_id":20782,
  "version":0,
  "steering":{
    "batchsys":null,
    "data":[],
    "system":{},
    "parameters":{
      "TARGET":"gsiftp://gridftp.icecube.wisc.edu/data/sim/scratch/IceSim/dynstack/$(dataset)/",
      "cvmfs":"/cvmfs/icecube.opensciencegrid.org/py3-v4.1.0/icetray-env",
      "metaproj_":"/net/cvmfs_users/kmeagher/combo_trunk",
      "metaproj":"/cvmfs/icecube.opensciencegrid.org/users/kmeagher/combo_trunk/",
      "env_shell":"$steering(cvmfs) $steering(metaproj)",
      "spectrum":"E^-2.6",
      "ScriptsURL":"http://prod-exe.icecube.wisc.edu/svn/projects/filterscripts/releases/V17-04-01/resources/scripts/",
      "seed":"$(dataset)",
      "year":2016,
      "category":"CORSIKA-in-ice",
      "CORSIKA::showers":300,
      "subdirectory":"$sprintf('%07d-%07d',$eval($(job)//1000*1000),$eval($(job)//1000*1000+999))",
      "MCType":"corsika_weighted",
      "TARGET::2016_L2":"gsiftp://gridftp.icecube.wisc.edu/data/sim/IceCube/2016/filtered/level2/$(category)/$(dataset)/$(subdirectory)",
      "oversampling":50,
      "CORSIKA::eprimarymin":30000,
      "composition":"5-component",
      "photonpropagator":"CLSim",
      "IceModel":"spice_3.2",
      "CORSIKA::eprimarymax":"1e6",
      "mjd_16":57531,
      "DOMefficiency":1,
      "CORSIKA::seed":"$eval($eval($(dataset)*100000 + $(job))%100000000)",
      "outfile":"$sprintf('%s_corsika.%06d.%06d',$steering(geometry),$(dataset),$(job))",
      "gcdfilel2":"/cvmfs/icecube.opensciencegrid.org/data/GCD/GeoCalibDetectorStatus_2016.$steering(mjd_16)_V0.i3.gz",
      "gcdfile":"/cvmfs/icecube.opensciencegrid.org/data/GCD/GeoCalibDetectorStatus_AVG_55697-57531_PASS2_SPE_withStdNoise.i3.gz",
      "FILTER::infile":"PFFilt_$steering(outfile).i3.zst",
      "IceSimPath":"$steering(metaproj)",
      "MCPrescale":1000,
      "geometry":"IC86.2016",
      "FILTER::outfile":"Level2_$steering(outfile).i3.zst",
      "CORSIKA::run":"$eval($eval($(dataset)*100000 + $(job))%100000000 + 1)",
      "hadronicinteraction":"Sybill-2.3"
    },
    "resources":[]
  },
  "options":{},
  "categories":[]
}