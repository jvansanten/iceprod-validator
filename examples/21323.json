{
  "parent_id":20016,
  "version":3,
  "options":{},
  "steering":{
    "parameters":{
      "EfficiencyScale":"$steering(EfficiencyScales)[$eval($args(iter) % $len($steering(EfficiencyScales)))]",
      "EfficiencyScales":[
        1,
        3
      ],
      "energy_bins":[
        300,
        50179.43086909521,
        153094.42634516465,
        296735.6797032332,
        475818.7158702139,
        686502.4694040753,
        926368.8220950533,
        1193675.799941327,
        1487054.2555816027,
        1805603.8584319616,
        2147473.2890218603,
        2510548.3609346715,
        2893975.4307961785,
        3295985.2559935665,
        3719903.6965039857,
        4164963.2037011646,
        4619703.577275953,
        5100026.539937439,
        5599606.57210451,
        6109817.158669883,
        6642200.365763941,
        7191161.381572378,
        7749496.795450846,
        8308379.00822436,
        8891313.947402483,
        9495824.43306962,
        10118670.519294873,
        10755794.90557609,
        11402288.328786306,
        12052381.53206641,
        12699470.315944038,
        13336179.48969776,
        14018492.363037528,
        14681948.35505021,
        15390209.829980426,
        16069223.573512036,
        16790930.246305853,
        17471121.35538317,
        18190522.325970232,
        18952087.77618387,
        19655578.495518554,
        20396177.599685386,
        21176440.216480263,
        21878901.65169867,
        22614423.734047934,
        23385034.21216621,
        24192914.939706154,
        24896309.20786503,
        25628670.929038007,
        26391552.129092637,
        27186607.690402865,
        28185639.233615104,
        29236832.311785027,
        30155227.74120596,
        31114524.724027902,
        32117095.436779473,
        33165482.400757853,
        34262413.12940251,
        35410816.24834429,
        36613839.258231975,
        37617850.80765816,
        38660833.52774202,
        39744754.0777785,
        40871701.79199444,
        42043897.82657417,
        43263705.10275095,
        44533639.125432804,
        45856379.76573991,
        47234784.105970725,
        48671900.456906244,
        50170983.67017138,
        51338045.24850098,
        52543470.31257853,
        53788895.60389222,
        55076044.0276655,
        56406730.065257,
        57782865.58270976,
        59206466.06855569,
        60679657.337249786,
        62204682.73799537,
        63783910.91255217,
        65419844.14996802,
        67115127.3907334,
        68872557.93826856,
        70695095.94128227,
        72585875.71717541,
        74548217.99375905,
        76585643.15457545,
        78701885.58219352,
        80900909.20366105,
        82414982.99864227,
        83969026.32149383,
        85564406.08372284,
        87202546.76890983,
        88884933.3205422,
        90613114.19823916,
        92388704.61367412,
        94213389.95822084,
        96088929.43525268,
        98017159.91114786,
        100000000
      ],
      "GCDFile":"IceCubeHEX_Sunflower_240m_IceCubeDepthRangeOnly.GCD.i3.bz2",
      "GeoName":"Sunflower_240m",
      "mctype":"MuonGun",
      "mjd":57087,
      "MMC::length":1700,
      "MMC::radius":2500,
      "MuonGun::from_energy":"$steering(energy_bins)[$(job)]",
      "MuonGun::gamma":1.4,
      "MuonGun::median_energy":"$eval($eval(0.5*$eval($steering(MuonGun::to_energy)**$eval(1-$steering(MuonGun::gamma))) + $eval(1-0.5)*$eval($steering(MuonGun::from_energy)**$eval(1-$steering(MuonGun::gamma))))**$eval(1./$eval(1-$steering(MuonGun::gamma))))",
      "MuonGun::to_energy":"$steering(energy_bins)[$eval($(job)+1)]",
      "nevents":"$steering(nevents_per_bin)[$(job)]",
      "nevents_per_bin":[
        1,
        2370,
        980,
        556,
        366,
        262,
        198,
        156,
        127,
        105,
        89,
        76,
        66,
        58,
        52,
        46,
        42,
        38,
        34,
        31,
        29,
        27,
        25,
        23,
        21,
        20,
        19,
        18,
        16,
        16,
        15,
        14,
        13,
        12,
        12,
        11,
        11,
        10,
        10,
        9,
        9,
        9,
        8,
        8,
        8,
        7,
        7,
        7,
        7,
        6,
        7,
        6,
        6,
        6,
        6,
        6,
        6,
        6,
        6,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        4,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3
      ],
      "outfile":"$sprintf(\"%s_%s_%.1fx_MuonGun.%06d.%06d\",$steering(GeoName),$steering(Sensor),$steering(EfficiencyScale),$(dataset),$(job))",
      "priority":0,
      "ptversion":"homogenous",
      "SCRIPTS::Gen2":"http://icecube:skua@code.icecube.wisc.edu/svn/sandbox/ayovych/gen2-simulation-studies/Gen2-Scripts/branches/isotropic-doms/trunk/segments",
      "SCRIPTS::Gen2::rev":"?p=180530",
      "seed":"$eval(1234+$(dataset)*3)",
      "Sensor":"$steering(Sensors)[$eval($args(iter) // $len($steering(EfficiencyScales)))]",
      "SensorAreaScales":{
        "iso-pdom":1,
        "pDOM":1
      },
      "Sensors":[
        "pDOM",
        "iso-pdom"
      ],
      "subdirectory":"$sprintf(\"%07d-%07d\",$eval($(job)//1000*1000),$eval($(job)//1000*1000+999))",
      "tarball::simulation":"http://prod-exe.icecube.wisc.edu/Gen2/tarballs/gen2-simulation.r154661.$OS_ARCH.tar.gz",
      "TARGET::baseproc":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/simulation/reco/$sprintf(\"%.1fx\",$steering(EfficiencyScale))/$steering(subdirectory)/",
      "TARGET::hits":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/simulation/hits/$sprintf(\"%.1fx\",$steering(EfficiencyScale))/$steering(subdirectory)/",
      "temp_file":"muongun",
      "weighted":"weighted",
      "year":2025
    },
    "batchsys":null,
    "system":{},
    "resources":[],
    "data":[]
  },
  "tasks":[
    {
      "depends":[],
      "batchsys":null,
      "trays":[
        {
          "iterations":1,
          "modules":[
            {
              "running_class":"muongun.MuonGun",
              "src":"$steering(SCRIPTS::Gen2)/muongun.py$steering(SCRIPTS::Gen2::rev)",
              "args":{
                "FromEnergy":"$steering(MuonGun::from_energy)",
                "FromZenith":0,
                "gamma":"$steering(MuonGun::gamma)",
                "gcdfile":"$steering(GCDFile)",
                "mjd":"$steering(mjd)",
                "nevents":"$steering(nevents)",
                "outputfile":"muongun.i3.zst",
                "ProposalCylinderLength":"$steering(MMC::length)",
                "ProposalCylinderRadius":"$steering(MMC::radius)",
                "RNGNumberOfStreams":"$(jobs_submitted)",
                "RNGSeed":"$steering(seed)",
                "RNGStream":"$(job)",
                "RunId":"$eval($(dataset)*100000 + $(job))",
                "ToEnergy":"$steering(MuonGun::to_energy)",
                "ToZenith":180
              },
              "env_shell":"simulation_tarball/env-shell.sh",
              "env_clear":false,
              "name":"MuonGun",
              "resources":[],
              "data":[],
              "classes":[
                {
                  "name":"simulation_tarball",
                  "src":"$steering(tarball::simulation)",
                  "resource_name":"",
                  "recursive":false,
                  "libs":"",
                  "env_vars":""
                }
              ],
              "parameters":{}
            }
          ],
          "name":"",
          "resources":[],
          "data":[
            {
              "type":"permanent",
              "movement":"input",
              "remote":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/$steering(GCDFile)",
              "local":"",
              "compression":false
            },
            {
              "type":"job_temp",
              "movement":"output",
              "remote":"",
              "local":"muongun.i3.zst",
              "compression":false
            }
          ],
          "classes":[],
          "parameters":{}
        }
      ],
      "requirements":{
        "memory":1,
        "os":"RHEL_7_x86_64"
      },
      "name":"muongun",
      "resources":[],
      "data":[],
      "classes":[],
      "parameters":{}
    },
    {
      "depends":[
        "muongun"
      ],
      "batchsys":null,
      "trays":[
        {
          "iterations":1,
          "modules":[
            {
              "running_class":"clsim.MultiSensorPhotons",
              "src":"$steering(SCRIPTS::Gen2)/ayovych_clsim_isopdom.py$steering(SCRIPTS::Gen2::rev)",
              "args":{
                "DisableTilt":true,
                "EfficiencyScale":"$max($steering(EfficiencyScales))",
                "gcdfile":"$steering(GCDFile)",
                "IceModel":"$steering(ptversion)",
                "IceModelLocation":"$I3_BUILD/mDOM-WOM-simulation/resources/ice",
                "inputfilelist":[
                  "muongun.i3.zst"
                ],
                "nproc":"$(jobs_submitted)",
                "outputfile":"photons.i3.zst",
                "ParallelEvents":10,
                "procnum":"$(job)",
                "seed":"$steering(seed)",
                "sensors":[
                  "pdom",
                  "mdom",
                  "degg"
                ],
                "UseGPUs":true
              },
              "env_shell":"simulation_tarball/env-shell.sh",
              "env_clear":false,
              "name":"MakePhotonsMultiSensor",
              "resources":[],
              "data":[],
              "classes":[],
              "parameters":{}
            }
          ],
          "name":"",
          "resources":[],
          "data":[
            {
              "type":"permanent",
              "movement":"input",
              "remote":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/$steering(GCDFile)",
              "local":"",
              "compression":false
            },
            {
              "type":"job_temp",
              "movement":"input",
              "remote":"",
              "local":"muongun.i3.zst",
              "compression":false
            },
            {
              "type":"job_temp",
              "movement":"output",
              "remote":"",
              "local":"photons.i3.zst",
              "compression":false
            }
          ],
          "classes":[],
          "parameters":{}
        }
      ],
      "requirements":{
        "gpu":1,
        "memory":4,
        "time":2
      },
      "name":"photons",
      "resources":[],
      "data":[],
      "classes":[
        {
          "name":"simulation_tarball",
          "src":"$steering(tarball::simulation)",
          "resource_name":"",
          "recursive":false,
          "libs":"",
          "env_vars":""
        }
      ],
      "parameters":{}
    },
    {
      "depends":[
        "photons"
      ],
      "batchsys":null,
      "trays":[
        {
          "iterations":4,
          "modules":[
            {
              "running_class":"clsim.DownsamplePEs",
              "src":"$steering(SCRIPTS::Gen2)/ayovych_clsim_isopdom.py$steering(SCRIPTS::Gen2::rev)",
              "args":{
                "EfficiencyScale":"$steering(EfficiencyScale)",
                "gcdfile":"$steering(GCDFile)",
                "inputfilelist":[
                  "photons.i3.zst"
                ],
                "nproc":"$(jobs_submitted)",
                "outputfile":"$steering(outfile)_hits.i3.bz2",
                "procnum":"$(job)",
                "seed":"$steering(seed)",
                "Sensor":"$steering(Sensor)"
              },
              "env_shell":"simulation_tarball/env-shell.sh",
              "env_clear":false,
              "name":"MakePEFromPhotons",
              "resources":[],
              "data":[],
              "classes":[],
              "parameters":{}
            }
          ],
          "name":"",
          "resources":[],
          "data":[
            {
              "type":"permanent",
              "movement":"input",
              "remote":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/$steering(GCDFile)",
              "local":"",
              "compression":false
            },
            {
              "type":"permanent",
              "movement":"output",
              "remote":"$steering(TARGET::hits)/$steering(outfile)_hits.i3.bz2",
              "local":"$steering(outfile)_hits.i3.bz2",
              "compression":false
            }
          ],
          "classes":[],
          "parameters":{}
        }
      ],
      "requirements":{
        "memory":4
      },
      "name":"hits",
      "resources":[],
      "data":[
        {
          "type":"job_temp",
          "movement":"input",
          "remote":"",
          "local":"photons.i3.zst",
          "compression":false
        }
      ],
      "classes":[
        {
          "name":"simulation_tarball",
          "src":"$steering(tarball::simulation)",
          "resource_name":"",
          "recursive":false,
          "libs":"",
          "env_vars":""
        }
      ],
      "parameters":{}
    },
    {
      "depends":[
        "hits"
      ],
      "batchsys":null,
      "trays":[
        {
          "iterations":4,
          "modules":[
            {
              "running_class":"DetectorSim.DetectorSimulation",
              "src":"$steering(SCRIPTS::Gen2)/DetectorSim.py$steering(SCRIPTS::Gen2::rev)",
              "args":{
                "AreaScale":"$eval($steering(EfficiencyScale)/$steering(SensorAreaScales)[$steering(Sensor)])",
                "gcdfile":"$steering(GCDFile)",
                "inputfilelist":[
                  "$steering(outfile)_hits.i3.bz2"
                ],
                "outputfile":"$steering(outfile)_detsim.i3.bz2",
                "RNGNumberOfStreams":"$(jobs_submitted)",
                "RNGSeed":"$steering(seed)",
                "RNGStream":"$(job)",
                "RunId":"$(job)"
              },
              "env_shell":"simulation_tarball/env-shell.sh",
              "env_clear":false,
              "name":"MakePEFromPhotons",
              "resources":[],
              "data":[],
              "classes":[],
              "parameters":{}
            }
          ],
          "name":"",
          "resources":[],
          "data":[
            {
              "type":"permanent",
              "movement":"input",
              "remote":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/$steering(GCDFile)",
              "local":"",
              "compression":false
            },
            {
              "type":"permanent",
              "movement":"input",
              "remote":"$steering(TARGET::hits)/$steering(outfile)_hits.i3.bz2",
              "local":"$steering(outfile)_hits.i3.bz2",
              "compression":false
            },
            {
              "type":"job_temp",
              "movement":"output",
              "remote":"",
              "local":"$steering(outfile)_detsim.i3.bz2",
              "compression":false
            }
          ],
          "classes":[],
          "parameters":{}
        }
      ],
      "requirements":{
        "memory":4
      },
      "name":"detector",
      "resources":[],
      "data":[],
      "classes":[
        {
          "name":"simulation_tarball",
          "src":"$steering(tarball::simulation)",
          "resource_name":"",
          "recursive":false,
          "libs":"",
          "env_vars":""
        }
      ],
      "parameters":{}
    },
    {
      "depends":[
        "detector"
      ],
      "batchsys":null,
      "trays":[
        {
          "iterations":4,
          "modules":[
            {
              "running_class":"BaseProc.BaseProcessing",
              "src":"$steering(SCRIPTS::Gen2)/BaseProc.py$steering(SCRIPTS::Gen2::rev)",
              "args":{
                "gcdfile":"$steering(GCDFile)",
                "inputfilelist":[
                  "$steering(outfile)_detsim.i3.bz2"
                ],
                "outputfile":"$steering(outfile)_baseproc.i3.bz2"
              },
              "env_shell":"/cvmfs/icecube.opensciencegrid.org/py2-v3.1.1/icetray-env combo/V00-00-03",
              "env_clear":false,
              "name":"baseproc",
              "resources":[],
              "data":[
                {
                  "type":"permanent",
                  "movement":"input",
                  "remote":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/$steering(GCDFile)",
                  "local":"",
                  "compression":false
                },
                {
                  "type":"job_temp",
                  "movement":"input",
                  "remote":"",
                  "local":"$steering(outfile)_detsim.i3.bz2",
                  "compression":false
                },
                {
                  "type":"permanent",
                  "movement":"output",
                  "remote":"$steering(TARGET::baseproc)/$steering(outfile)_baseproc.i3.bz2",
                  "local":"$steering(outfile)_baseproc.i3.bz2",
                  "compression":false
                }
              ],
              "classes":[
                {
                  "name":"Calibration.py",
                  "src":"$steering(SCRIPTS::Gen2)/Calibration.py$steering(SCRIPTS::Gen2::rev)",
                  "resource_name":"",
                  "recursive":false,
                  "libs":"",
                  "env_vars":""
                },
                {
                  "name":"Gen2STConfiguration.py",
                  "src":"$steering(SCRIPTS::Gen2)/Gen2STConfiguration.py$steering(SCRIPTS::Gen2::rev)",
                  "resource_name":"",
                  "recursive":false,
                  "libs":"",
                  "env_vars":""
                }
              ],
              "parameters":{}
            }
          ],
          "name":"",
          "resources":[],
          "data":[],
          "classes":[],
          "parameters":{}
        }
      ],
      "requirements":{
        "memory":6
      },
      "name":"baseproc",
      "resources":[],
      "data":[],
      "classes":[],
      "parameters":{}
    },
    {
      "depends":[
        "baseproc"
      ],
      "batchsys":null,
      "trays":[
        {
          "iterations":4,
          "modules":[
            {
              "src":"$steering(SCRIPTS::Gen2)/ayovych_BaseReco.py$steering(SCRIPTS::Gen2::rev)",
              "args":{
                "g":"$steering(GCDFile)",
                "i":"$steering(outfile)_baseproc.i3.bz2",
                "p":"$steering(outfile)"
              },
              "env_shell":"/cvmfs/icecube.opensciencegrid.org/py2-v3.1.1/icetray-env combo/V00-00-03",
              "env_clear":false,
              "name":"basereco",
              "resources":[],
              "data":[
                {
                  "type":"permanent",
                  "movement":"input",
                  "remote":"gsiftp://gridftp.icecube.wisc.edu/data/user/ayovych/$steering(GCDFile)",
                  "local":"",
                  "compression":false
                },
                {
                  "type":"permanent",
                  "movement":"input",
                  "remote":"$steering(TARGET::baseproc)/$steering(outfile)_baseproc.i3.bz2",
                  "local":"$steering(outfile)_baseproc.i3.bz2",
                  "compression":false
                },
                {
                  "type":"permanent",
                  "movement":"output",
                  "remote":"$steering(TARGET::basereco)/$steering(outfile)_basereco.i3.bz2",
                  "local":"$steering(outfile)_basereco.i3.bz2",
                  "compression":false
                }
              ],
              "classes":[],
              "parameters":{}
            }
          ],
          "name":"",
          "resources":[],
          "data":[],
          "classes":[],
          "parameters":{}
        }
      ],
      "requirements":{
        "memory":6
      },
      "name":"reco",
      "resources":[],
      "data":[],
      "classes":[],
      "parameters":{}
    }
  ],
  "difplus":null,
  "description":"GEN2 MultiSensor isotropic Muon ",
  "categories":[]
}